include ../mixins/list-category.mixin.pug

nav.navbar.navbar-expand-lg.navbar-light.bg-light.fixed-top.shadow-sm.w-100
  .container-fluid
    a.navbar-brand.font-weight-bold(href="/") ShopKi√™n
    button.navbar-toggler(type="button", data-toggle="collapse", data-target="#navbarNav")
      span.navbar-toggler-icon
    .collapse.navbar-collapse#navbarNav
      ul.navbar-nav.mr-auto
        li.nav-item.active
          a.nav-link(href="/") Trang ch·ªß
        li.nav-item.dropdown
          a.nav-link.dropdown-toggle(href="", id="productDropdown", role="button", data-toggle="dropdown", aria-haspopup="true", aria-expanded="false") Danh m·ª•c
          .dropdown-menu(aria-labelledby="productDropdown")
            +listCategiry(catagory)
        li.nav-item
          a.nav-link(href="/products") Trang s·∫£n ph·∫©m
        li.nav-item
          a.nav-link(href="/about") Gi·ªõi thi·ªáu
        li.nav-item
          a.nav-link(href="/contact") Li√™n h·ªá

      //- gi·ªè h√†ng
      ul.navbar-nav
        li.nav-item
          a.btn(href="/checkout/order") ƒê∆°n h√†ng
        li.nav-item.dropdown
          a.nav-link.dropdown-toggle(href="#", id="cartDropdown", role="button", data-toggle="dropdown", aria-haspopup="true", aria-expanded="false")
            | üõí 
            span.badge.badge-pill.badge-danger #{cart.totalProduct}
          .dropdown-menu.dropdown-menu-right.p-0(aria-labelledby="cartDropdown", style="width: 350px;")
            .cart-scroll-area.p-2(style="max-height: 300px; overflow-y: auto;")
              if cart.products.length === 0
                .dropdown-item.text-muted Gi·ªè h√†ng tr·ªëng
              else
                each item in cart.products
                  .dropdown-item.d-flex.align-items-center.border-bottom.pb-2.mb-2
                    img(src=item.thumbnail, alt=item.title, width="50", height="50", class="mr-2 rounded")
                    .flex-grow-2
                      strong #{item.title} 
                      br
                      small S·ªë l∆∞·ª£ng: #{item.quantity}
                      br
                      small.text-success Gi√°: #{item.total} 
                    a.btn.btn-sm.btn-outline-info.ml-2(href=`/products/detail/${item.slug}`) Xem
            .cart-footer.bg-light.border-top.px-3.py-2(style="position: sticky; bottom: 0;")
              .d-flex.justify-content-between.mb-2
                span.font-weight-bold T·ªïng: 
                span.text-danger #{cart.totalProduct} s·∫£n ph·∫©m
              .d-flex.justify-content-between.mb-2
                span.font-weight-bold T·ªïng ti·ªÅn: 
                span.text-danger #{cart.totalAmount}ƒë
              .d-flex.justify-content-between
                a.btn.btn-sm.btn-outline-secondary.w-50.mr-1(href="/cart") üõí Gi·ªè h√†ng
                a.btn.btn-sm.btn-success.w-50.ml-1(href="/checkout") üí≥ Thanh to√°n

        //- ng∆∞·ªùi d√πng
        li.nav-item.dropdown
          - if(user)
            a.nav-link.dropdown-toggle(href="#", id="userDropdown", role="button", data-toggle="dropdown", aria-haspopup="true", aria-expanded="false")
              i.fas.fa-user-circle.mr-2
              | !{user.fullname}
            .dropdown-menu.dropdown-menu-right(aria-labelledby="userDropdown")
              a.dropdown-item(href="/user/profile") H·ªì s∆° c√° nh√¢n
              a.dropdown-item(href="/user/logout") ƒêƒÉng xu·∫•t
          - else
            a.btn.btn-outline-primary.ml-2(href="/user/login") ƒêƒÉng nh·∫≠p