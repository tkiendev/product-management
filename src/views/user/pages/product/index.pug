extends ../../layouts/default.pug

block main 
  .container-fluid.mt-5.pt-5
    h2.text-center.mb-4 Danh mục sản phẩm

    ul.nav.nav-tabs.justify-content-center.mb-4
      li.nav-item
        a.nav-link.active(href="#shared", data-toggle="tab") Sản phẩm chung
      each item in listChildCategory
        li.nav-item
          a.nav-link(href=`#${item.slug}`, data-toggle="tab") #{item.title}

    .tab-content
      #shared.tab-pane.fade.show.active
        .row
          each item in productsMain
            .col-md-3.mb-4
              .card.h-100.shadow-sm
                .img-wrapper
                  img.card-img-top(src=item.thumbnail, alt=item.title)
                .card-body.text-center
                  h5.card-title= item.title
                  p.text-muted.mb-1 Giá gốc: 
                    del.text-danger= item.formattPrice + '₫'
                  p.text-success.mb-1 Giá mới: 
                    strong= item.newPrice + '₫'
                  p.text-warning.mb-2 Giảm: #{item.discountPercentage}% 
                  a.btn.btn-sm.btn-outline-primary(href=`/products/detail/${item.slug}`) Xem
      each item in listChildCategory
        .tab-pane.fade(id=item.slug)
          .row
            each product in item.products
              .col-md-3.mb-4
                .card.h-100.shadow-sm
                  .img-wrapper
                    img.card-img-top(src=product.thumbnail, alt=product.title)
                  .card-body.text-center
                    h5.card-title= product.title
                    p.text-muted.mb-1 Giá gốc: 
                      del.text-danger= product.formattPrice + '₫'
                    p.text-success.mb-1 Giá mới: 
                      strong= product.newPrice + '₫'
                    p.text-warning.mb-2 Giảm: #{product.discountPercentageproduct}% 
                    a.btn.btn-sm.btn-outline-primary(href=`/products/detail/${product.slug}`) Xem

  //- CSS bổ sung để đồng nhất ảnh
  style.
    .img-wrapper {
      width: 100%;
      height: 100px;
      overflow: hidden;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .img-wrapper img {
      max-height: 100%;
      object-fit: contain;
    }