extends ../../layouts/default.pug
include ../../mixins/filterStatus.pug
include ../../mixins/formSreach.pug
include ../../mixins/pagination.pug
include ../../mixins/formChangeMulti.pug
include ../../mixins/notification.pug



block main    
    + notification(messages, 5000)
    .card.mb-3
        .card-header.mt-2 
            h4 Bộ lọc và Tìm kiếm
        .card-body
            .row
                .col-8 
                    + filterStatus(btnStatus)
                   
                .col-4
                    + formSreach(keywordSreach)
    .card.mb-3
        .card-header
            .row
                .col-8
                    h4 Danh sách sản phẩm
                .col-2 
                    a(href=`${prefixAdmin}/products/create` class='btn btn-sm ml-1 btn-outline-success') + Thêm sản phẩm 
                .col-2 
                    a(href="" class='btn btn-sm ml-1 btn-outline-danger') Thùng rác 
        .card-body
            + formchangeMulti(`${prefixAdmin}/products/change-multi?_method=PATCH`, listOption)
            table(class='table table-hover table-sm' table-check)
                thead
                    tr
                        th 
                            input(type='checkbox' name='checkAll')
                        th STT
                        th Hình ảnh
                        th Tên sản Phẩm 
                        th Giá 
                        th Giảm (%)
                        th Số lượng 
                        th Vị trí
                        th Trạng thái
                        th Hoạt động
                    tbody
                        each item, index  in product
                            if(item)
                                tr
                                    td
                                        input(type='checkbox' name='id' check-box value=item.id)
                                    td #{index + 1}
                                    td 
                                        img(
                                            src=`${item.thumbnail}`
                                            alt=`${item.title}`
                                            width=`100px`
                                            height=`auto`
                                        )
                                    td #{item.title}
                                    td #{item.stringPrice}đ
                                    td #{item.discountPercentage}%
                                    td #{item.stock}
                                    td
                                        input(type='number' value=item.position style="width: 6ch" input-position)
                                    td 
                                        if (item.status === 'active')
                                            a(href="" class = `badge badge-success` data-status=item.status id=item.id) Hoạt Động
                                        else 
                                            a(href="" class = `badge badge-danger`  data-status=item.status id=item.id) Dừng hoạt Động
                                    td 
                                        a(href =`${prefixAdmin}/products/edit/${item.id}` class = `btn btn-warning btn-sm`) Sửa
                                        button(class = `btn btn-danger btn-sm ml-1` btn-delete id=item.id) Xóa
                                        a(href =`${prefixAdmin}/products/detail/${item.id}` class = `btn btn-secondary btn-sm ml-1`) Chi tiết 

                            else 
                                span Không có sản phẩm nào
    
    form(action="" method="POST" change-status path=`${prefixAdmin}/products/change-status`)
    form(action="" method="POST" change-delete path=`${prefixAdmin}/products/change-delete`) 

    + pagination(paginationPage)
    <script src="/admin/js/eventProduct.js"></script>