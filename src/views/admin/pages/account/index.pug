extends ../../layouts/default.pug
include ../../mixins/notification.pug

block main 
    - if(user.role.includes('account_view'))
        + notification(messages, 5000)
        h1 Quản lý tài khoản
        .card
            .card-header
                .row 
                    .col-8
                        h4 Danh Mục Tài khoản
                    .col-4  
                        - if(user.role.includes('account_create'))
                            a(href=`${prefixAdmin}/account/create` class='btn btn-outline-success') + Thêm tài khoản
            .card-body
                table(class='table table-hover table-sm' table-check)
                    thead
                        tr
                            th 
                                input(type='checkbox' name='checkAll')
                            th STT
                            th ảnh
                            th Họ và Tên
                            th email 
                            th nhóm quyền
                            th Trạng thái
                            th Hoạt động
                        tbody  
                            each item, index in acccounts
                                tr
                                    td
                                        input(type='checkbox' name='id' check-box value='')
                                    td #{index+1} 
                                    td 
                                        img(src=item.thumbnail alt='Avatar mặc định' class='rounded-circle' width='40' height='40')
                                    td #{item.fullname}
                                    td #{item.email}
                                    td #{item.role}
                                    td 
                                        - if (item.status === 'active')
                                            a(href="" class = `badge badge-success` data-status=item.status id=item.id) Hoạt Động
                                        - else 
                                            a(href="" class = `badge badge-danger`  data-status=item.status id=item.id) Dừng hoạt Động
                                    td 
                                        - if(user.role.includes('account_edit'))
                                            a(href =`${prefixAdmin}/account/edit/${item.id}` class = `btn btn-warning btn-sm`) Sửa
                                        - if(user.role.includes('account_delete'))
                                            button(class = `btn btn-danger btn-sm ml-1` btn-delete id) Xóa
                                        a(href =`${prefixAdmin}/permissions-group/detail/` class = `btn btn-secondary btn-sm ml-1`) Chi tiết 
        form(action="" method="POST" change-status path=`${prefixAdmin}/permissions-group/change-status`)
        form(action="" method="POST" change-delete path=`${prefixAdmin}/permissions-group/change-delete`) 

        <script src="/admin/js/permissions-group/event-groups.js"></script>
    
    - else 
        h1 Bạn không thế xem được trang này
        - var messages = {error: 'Không thể truy cập'}
        + notification(messages, 5000)